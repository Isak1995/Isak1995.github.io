# 编写实体接口的小细节

在编写实体接口时，对于其属性的定义需要根据该接口对应的表结构来定义，在这个定义过程中，我们需要注意以下几点：
1、数据类型
2、有无符号
3、可否为空
4、是否有导航属性

---

下面的代码为科目分类表的MySQL表结构：
```sql
CREATE TABLE IF NOT EXISTS `SubjectClass`
(
    `SubjectClassId` int unsigned NOT NULL COMMENT '主键，科目分类编号',
    `ParentId` int unsigned NULL COMMENT '上级分类编号',
    `TenantId` int unsigned NOT NULL COMMENT '所属租户编号',
    `BranchId` int unsigned NOT NULL COMMENT '所属分支机构编号(默认为零，表示非分支机构)',
    `Schema` varchar(100) NOT NULL COMMENT '模式(参考[Schema](#Schema))',
    `Kind` tinyint unsigned NOT NULL DEFAULT 0 COMMENT '科目种类',
    `Name` nvarchar(100) NOT NULL COMMENT '分类名称',
    `PinYin` varchar(100) NULL COMMENT '拼音',
    PRIMARY KEY (`SubjectClassId`)
) ENGINE=InnoDB COMMENT '科目分类表';
```

首先我们来分析一下该表的数据类型，分别有<span data-type="color" style="color:#569cd6">int</span><span data-type="color" style="color:#1D39C4">、</span><span data-type="color" style="color:#569cd6">varchar</span><span data-type="color" style="color:#1D39C4">、</span><span data-type="color" style="color:#569cd6">tinyint</span><span data-type="color" style="color:#1D39C4">、</span><span data-type="color" style="color:#569cd6">nvarchar</span>这四种类型，其实在实际中我们还会用到其他一些高频的数据类型比如<span data-type="color" style="color:#569cd6">bigint</span>、<span data-type="color" style="color:#569cd6">smallint</span>、<span data-type="color" style="color:#569cd6">datetime</span>、<span data-type="color" style="color:#569cd6">date</span>、<span data-type="color" style="color:#569cd6">decimal </span><span data-type="color" style="color:#262626">，那这些数据类型在C#中对应的数据类型又是什么呢？下面我将这些常用的类型做了一张对照表，可以帮助我们进行实体接口变量的定义.</span>

<div class="bi-table">
  <table>
    <colgroup>
      <col width="auto" />
      <col width="auto" />
    </colgroup>
    <tbody>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p">MySQL数据类型</div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p">C#数据类型</div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">tinyint</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">byte</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">smallint</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">short</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">int</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">int</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">bigint</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">long</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">varchar/nvarchar</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">string</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">datetime/date</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">DateTime</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#40A9FF">decimal</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#FFA940">decimal</span></div>
          </div>
        </td>
      </tr>
      <tr height="34px">
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#F5222D">tinyint(1)</span></div>
          </div>
        </td>
        <td rowspan="1" colSpan="1">
          <div data-type="alignment" data-value="center" style="text-align:center">
            <div data-type="p"><span data-type="color" style="color:#F5222D">bool</span></div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

特别需要注意的是如果数据库中出现<span data-type="color" style="color:#F5222D">tinyint(1)</span>的情况，即tinyint的长度为1，那么这个时候我们在C#中的类型就不是表中的byte类型了，而是<span data-type="color" style="color:#F5222D">bool</span>类型.

---

以下为科目分类表对应的实体接口的部分代码：```plain
/*
 * Authors:
 *   某某某(English name) <邮箱>
 *
 * Copyright (c) 2018 XXXXX Technology Co., Ltd. All rights reserved.
 */

using System;
using System.Collections.Generic;

namespace XXXX.Common.Models
{
    #region 普通属性
    /// <summary>
    /// 获取或设置科目分类编号。
    /// </summary>
    uint SubjectClassId
    {
    	get; set;
    }

    /// <summary>
    /// 获取或设置上级分类编号。
    /// </summary>
    uint? ParentId
    {
    	get; set;
    }

    /// <summary>
    /// 获取或设置所属租户编号。
    /// </summary>
    uint TenantId
    {
    	get; set;
    }

    /// <summary>
    /// 获取或设置所属租户对象。
    /// </summary>
    ITenant Tenant
    {
    	get; set;
    }
    #endregion
}
```
      从上面的代码可以看到在ParentId属性的数据类型为uint，并且在uint后还有一个"?"，那么它们是什么意思呢？我们看一下表中的ParentId字段是怎么定义的：
<span data-type="color" style="color:#40A9FF">[`ParentId` int unsigned NULL COMMENT &#x27;上级分类编号&#x27;]</span>
'<span data-type="color" style="color:#40A9FF">unsigned</span>'表示无符号，'<span data-type="color" style="color:#40A9FF">NULL</span><span data-type="color" style="color:#262626">&#x27;</span>表示值可为空，这下子我们大概就可以知道uint?是什么意思了，'uint'表示无符号的int类型，类推：ulong、ushort...，那么'?'所表示的意义就是该属性可以为空。属性经过这样的定义后，对数据的约束更加严谨。
接着向下看代码，我们发现有一个导航属性Tenant，它可以从当前实体导航到ITenant实体。 与其他属性不同，导航属性并不携带数据。
     其次，为了代码的可读性更高，我们给每个属性添加了<span data-type="color" style="color:#40A9FF">&lt;Summary&gt;</span>标记用于描述该属性，同时也给该接口添加了描述。

